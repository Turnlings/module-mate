.gt-empty-card#chart_card
  .heading
    .mini-stat
      .title Minutes Spent
      .figure= subject.total_minutes(date_since)

    - form_url = local_assigns[:form_url].presence || request.path
    - turbo_frame_id = local_assigns[:turbo_frame_id]
    - form_data = turbo_frame_id.present? ? { turbo_frame: turbo_frame_id } : {}
    = form_with url: form_url,
                method: :get,
                data: form_data.merge(turbo: true),
                html: { class: "gt-form cumulative-toggle-form", action: form_url } do |f|
      .split-row.mobile-col
        = f.select :date_since,
            [ ["All Time", "all"],
              ["Last Week", "1_week"],
              ["Last Month", "1_month"],
              ["Last 3 Months", "3_months"],
              ["Last 6 Months", "6_months"]],
            { selected: params[:date_since] || "all" },
            { onchange: "this.form.requestSubmit()", class: "cumulative-dropdown text-muted" }
        = f.select :cumulative,
            [["Cumulative", "true"], ["Daily", "false"]],
            { selected: params[:cumulative] || "true" },
            { onchange: "this.form.requestSubmit()", class: "cumulative-dropdown text-muted" }

  .body
    .chart-container
      - if params[:cumulative] == "false"
        = column_chart time_path.call, stacked: true, zeros: false, legend: false, width: "100%", height: "300px", library: { responsive: true, maintainAspectRatio: false, scales: { x: { type: "time", time: { unit: "day", displayFormats: { day: "MMM d" }, tooltipFormat: "MMM d" } } }, animation: {duration: 1000, easing: "easeOutQuart"} }
      - else 
        = line_chart time_path.call, 
          curve: false, 
          legend: false, 
          width: "100%", 
          height:"300px", 
          library: { responsive: true, maintainAspectRatio: false }