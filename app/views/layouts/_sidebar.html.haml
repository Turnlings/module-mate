.side-heading
  .title= link_to "ModuleMate", root_path
  .account
    - if user_signed_in?
      = link_to user_path(current_user), class: 'unstyle-link profile' do
        %i.fa-solid.fa-circle-user
        %span= current_user.email
    - else
      = link_to "Sign In", new_user_session_path, style: "font-size: 20px;"

    %button#theme-toggle.icon-button.float-end.moon
      %i.fa-solid.fa-moon

.side-content
  -# Quick-add time
  .gt-card.gt-form
    %h2 Quicklog
    = form_with model: @timelog, url: quick_log_path, local: true do |f|
      .split-row
        = f.text_field :module_code, placeholder: 'Module Code', class: "m-0"
        = f.number_field :minutes, placeholder: 'Minutes', class: "m-0"

      = f.submit 'Add Time', class: "link-button"

  -# Modules
  .module-list
    = link_to uni_modules_path do
      All Modules
    - if @pinned_modules
      - @pinned_modules.each do |m|
        = link_to m, class: "#{'module-selected' if m == @uni_module}" do
          .name-row
            .mod-name= m.name
            .mod-code= m.code

  .gt-card.upcoming-assessments
    %h2 Upcoming Assessments
    - if @next_exams
      - @next_exams.each do |exam|
        = link_to uni_module_exam_path(exam.uni_module, exam) do
          .name-row
            .text-truncate= exam.name
            .mod-code= exam.uni_module.code
          .date-row
            .due-date.font-secondary
              Due:
              = exam.due.strftime("%d %b %Y, %H:%M")
            - if exam.due < 1.day.from_now
              .chip-danger= "#{((exam.due - Time.current)/1.hour).floor} Hours"
            - elsif exam.due < 1.week.from_now
              .chip-warning= "#{(exam.due.to_date - Date.today).to_i} Days"
    - else
      %span No upcoming assessments.